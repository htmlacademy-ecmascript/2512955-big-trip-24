(()=>{var e={10:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(537),s=n.n(i),a=n(645),r=n.n(a)()(s());r.push([e.id,".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n","",{version:3,sources:["webpack://./src/framework/view/abstract-view.css"],names:[],mappings:"AAAA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE;;IAEE,wBAAwB;EAC1B;;EAEA;;;;;IAKE,2BAA2B;EAC7B;;EAEA;;;;IAIE,0BAA0B;EAC5B;AACF",sourcesContent:[".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n"],sourceRoot:""}]);const o=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,s,a){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(i)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(r[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);i&&r[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),s&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=s):l[4]="".concat(s)),t.push(l))}},t}},537:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),a="/*# ".concat(s," */");return[t].concat([a]).join("\n")}return[t].join("\n")}},484:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",r="day",o="week",c="month",d="quarter",l="year",f="date",u="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},m=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},v={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+m(i,2,"0")+":"+m(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(i,c),a=n-s<0,r=t.clone().add(i+(a?-1:1),c);return+(-(i+(n-s)/(a?s-r:r-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:l,w:o,d:r,D:f,h:a,m:s,s:i,ms:n,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},_="en",g={};g[_]=b;var y=function(e){return e instanceof T},w=function e(t,n,i){var s;if(!t)return _;if("string"==typeof t){var a=t.toLowerCase();g[a]&&(s=a),n&&(g[a]=n,s=a);var r=t.split("-");if(!s&&r.length>1)return e(r[0])}else{var o=t.name;g[o]=t,s=o}return!i&&s&&(_=s),s||!i&&_},$=function(e,t){if(y(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new T(n)},M=v;M.l=w,M.i=y,M.w=function(e,t){return $(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function b(e){this.$L=w(e.locale,null,!0),this.parse(e)}var m=b.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(M.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(h);if(i){var s=i[2]-1||0,a=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)):new Date(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return M},m.isValid=function(){return!(this.$d.toString()===u)},m.isSame=function(e,t){var n=$(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return $(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<$(e)},m.$g=function(e,t,n){return M.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,d=!!M.u(t)||t,u=M.p(e),h=function(e,t){var i=M.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return d?i:i.endOf(r)},p=function(e,t){return M.w(n.toDate()[e].apply(n.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},b=this.$W,m=this.$M,v=this.$D,_="set"+(this.$u?"UTC":"");switch(u){case l:return d?h(1,0):h(31,11);case c:return d?h(1,m):h(0,m+1);case o:var g=this.$locale().weekStart||0,y=(b<g?b+7:b)-g;return h(d?v-y:v+(6-y),m);case r:case f:return p(_+"Hours",0);case a:return p(_+"Minutes",1);case s:return p(_+"Seconds",2);case i:return p(_+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var o,d=M.p(e),u="set"+(this.$u?"UTC":""),h=(o={},o[r]=u+"Date",o[f]=u+"Date",o[c]=u+"Month",o[l]=u+"FullYear",o[a]=u+"Hours",o[s]=u+"Minutes",o[i]=u+"Seconds",o[n]=u+"Milliseconds",o)[d],p=d===r?this.$D+(t-this.$W):t;if(d===c||d===l){var b=this.clone().set(f,1);b.$d[h](p),b.init(),this.$d=b.set(f,Math.min(this.$D,b.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[M.p(e)]()},m.add=function(n,d){var f,u=this;n=Number(n);var h=M.p(d),p=function(e){var t=$(u);return M.w(t.date(t.date()+Math.round(e*n)),u)};if(h===c)return this.set(c,this.$M+n);if(h===l)return this.set(l,this.$y+n);if(h===r)return p(1);if(h===o)return p(7);var b=(f={},f[s]=e,f[a]=t,f[i]=1e3,f)[h]||1,m=this.$d.getTime()+n*b;return M.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||u;var i=e||"YYYY-MM-DDTHH:mm:ssZ",s=M.z(this),a=this.$H,r=this.$m,o=this.$M,c=n.weekdays,d=n.months,l=function(e,n,s,a){return e&&(e[n]||e(t,i))||s[n].slice(0,a)},f=function(e){return M.s(a%12||12,e,"0")},h=n.meridiem||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i},b={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:M.s(o+1,2,"0"),MMM:l(n.monthsShort,o,d,3),MMMM:l(d,o),D:this.$D,DD:M.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,c,2),ddd:l(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(a),HH:M.s(a,2,"0"),h:f(1),hh:f(2),a:h(a,r,!0),A:h(a,r,!1),m:String(r),mm:M.s(r,2,"0"),s:String(this.$s),ss:M.s(this.$s,2,"0"),SSS:M.s(this.$ms,3,"0"),Z:s};return i.replace(p,(function(e,t){return t||b[e]||s.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,f,u){var h,p=M.p(f),b=$(n),m=(b.utcOffset()-this.utcOffset())*e,v=this-b,_=M.m(this,b);return _=(h={},h[l]=_/12,h[c]=_,h[d]=_/3,h[o]=(v-m)/6048e5,h[r]=(v-m)/864e5,h[a]=v/t,h[s]=v/e,h[i]=v/1e3,h)[p]||v,u?_:M.a(_)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return g[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=w(e,t,!0);return i&&(n.$L=i),n},m.clone=function(){return M.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},b}(),C=T.prototype;return $.prototype=C,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",r],["$M",c],["$y",l],["$D",f]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),$.extend=function(e,t){return e.$i||(e(t,T,$),e.$i=!0),$},$.locale=w,$.isDayjs=y,$.unix=function(e){return $(1e3*e)},$.en=g[_],$.Ls=g,$.p={},$}()},178:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(i,s,a){var r=s.prototype;a.utc=function(e){return new s({date:e,utc:!0,args:arguments})},r.utc=function(t){var n=a(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},r.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var o=r.parse;r.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),o.call(this,e)};var c=r.init;r.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else c.call(this)};var d=r.utcOffset;r.utcOffset=function(i,s){var a=this.$utils().u;if(a(i))return this.$u?0:a(this.$offset)?d.call(this):this.$offset;if("string"==typeof i&&(i=function(e){void 0===e&&(e="");var i=e.match(t);if(!i)return null;var s=(""+i[0]).match(n)||["-",0,0],a=s[0],r=60*+s[1]+ +s[2];return 0===r?0:"+"===a?r:-r}(i),null===i))return this;var r=Math.abs(i)<=16?60*i:i,o=this;if(s)return o.$offset=r,o.$u=0===i,o;if(0!==i){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(r+c,e)).$offset=r,o.$x.$localOffset=c}else o=this.utc();return o};var l=r.format;r.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},r.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var f=r.toDate;r.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var u=r.diff;r.diff=function(e,t,n){if(e&&this.$u===e.$u)return u.call(this,e,t,n);var i=this.local(),s=a(e).local();return u.call(i,s,t,n)}}}()},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var a={},r=[],o=0;o<e.length;o++){var c=e[o],d=i.base?c[0]+i.base:c[0],l=a[d]||0,f="".concat(d," ").concat(l);a[d]=l+1;var u=n(f),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var p=s(h,i);i.byIndex=o,t.splice(o,0,{identifier:f,updater:p,references:1})}r.push(f)}return r}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var a=i(e=e||[],s=s||{});return function(e){e=e||[];for(var r=0;r<a.length;r++){var o=n(a[r]);t[o].references--}for(var c=i(e,s),d=0;d<a.length;d++){var l=n(a[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=c}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={id:i,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";class e{_offerModel=null;_routeDestinationModel=null;_routeModel=null;constructor({destinationModel:t,offerModel:n,routeModel:i}){if(new.target===e)throw new Error("Presenter is abstract class!");this._offerModel=n,this._routeDestinationModel=t,this._routeModel=i}init(){throw new Error("Method init is abstract")}}const t={EVERYTHING:"everything",FUTURE:"future",PRESENT:"present",PAST:"past"},i=t.EVERYTHING,s="beforeend";function a(e,t,n=s){if(!(e instanceof M))throw new Error("Can render only components");if(null===t)throw new Error("Container element doesn't exist");t.insertAdjacentElement(n,e.element)}function r(e,t){if(!(e instanceof M&&t instanceof M))throw new Error("Can replace only components");const n=e.element,i=t.element,s=i.parentElement;if(null===s)throw new Error("Parent element doesn't exist");s.replaceChild(n,i)}function o(e){if(null!==e){if(!(e instanceof M))throw new Error("Can remove only components");e.element.remove(),e.removeElement()}}var c=n(379),d=n.n(c),l=n(795),f=n.n(l),u=n(569),h=n.n(u),p=n(565),b=n.n(p),m=n(216),v=n.n(m),_=n(589),g=n.n(_),y=n(10),w={};w.styleTagTransform=g(),w.setAttributes=b(),w.insert=h().bind(null,"head"),w.domAPI=f(),w.insertStyleElement=v(),d()(y.Z,w),y.Z&&y.Z.locals&&y.Z.locals;const $="shake";class M{#e=null;constructor(){if(new.target===M)throw new Error("Can't instantiate AbstractView, only concrete one.")}get element(){return this.#e||(this.#e=function(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}(this.template)),this.#e}get template(){throw new Error("Abstract method not implemented: get template")}removeElement(){this.#e=null}shake(e){this.element.classList.add($),setTimeout((()=>{this.element.classList.remove($),e?.()}),600)}}const T=class extends M{#t=i;#n=null;#i=null;constructor({onFilterChange:e,filtersRecordCountInfo:t,activeFilterType:n}){super(),this.#i=e,this.#n=t,this.#t=n,this.element.addEventListener("change",this.#s)}get template(){return((e,t=i,n)=>(e?.length??0)>0?`<form class="trip-filters" action="#" method="get">\n        ${e.map((e=>`\n      <div class="trip-filters__filter">\n        <input id="filter-${e}" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="${e}" ${e===t?"checked":""} ${0===(n[e]??0)?"disabled":""}>\n        <label class="trip-filters__filter-label" for="filter-${e}">\n          ${e}\n        </label>\n      </div>\n    `)).join("")}\n        <button class="visually-hidden" type="submit">\n          Accept filter\n        </button>\n      </form>`:"")(Object.values(t),this.#t,this.#n)}#s=e=>{if(e.preventDefault(),e.target?.checked){const t=e.target.value;this.#i(t)}}},C={DAY:"day",EVENT:"event",TIME:"time",PRICE:"price",OFFERS:"offers"},E=C.DAY;var D=n(484),k=n.n(D),S=n(178),V=n.n(S);k().extend(V());const B=k().utc,R={[C.DAY]:e=>[...e].sort(((e,t)=>{const n=B(e.date_from),i=B(t.date_from);return n.diff(i,"s")})),[C.PRICE]:e=>[...e].sort(((e,t)=>{const n=e.base_price;return t.base_price-n})),[C.TIME]:e=>[...e].sort(((e,t)=>{const n=B(e.date_from),i=B(t.date_from),s=B(e.date_to);return B(t.date_to).diff(i,"s")-s.diff(n,"s")}))};class F extends M{#a=E;#r=null;constructor({onSortingChangeCallback:e,activeSortType:t}){super(),this.#a=t,this.#r=e,this.element.addEventListener("change",this.#o)}#o=e=>{e.preventDefault();const t=e.target?.dataset?.sortType;e.target?.checked&&t&&this.#r(t)};get template(){return e=Object.values(C),t=this.#a,(e?.length??0)>0?`<form class="trip-events__trip-sort  trip-sort" action="#" method="get">\n        ${e.map((e=>{const n=R[e]?"":"disabled";return`\n      <div class="trip-sort__item  trip-sort__item--${e}">\n        <input id="sort-${e}" class="trip-sort__input  visually-hidden" data-sort-type="${e}" type="radio" name="trip-sort" value="sort-${e}" ${e!==t||n?"":"checked"} ${n}>\n        <label class="trip-sort__btn" for="sort-${e}">\n          ${e}\n        </label>\n      </div>`})).join("")}\n      </form>`:"";var e,t}}class I extends M{constructor(){super()}get template(){return'\n    <button class="trip-main__event-add-btn  btn  btn--big  btn--yellow" type="button">\n      New event\n    </button>\n  '}}class O extends M{constructor(){super()}get template(){return'<ul class="trip-events__list"></ul>'}}const A=class extends M{constructor(){super()}get template(){return'<li class="trip-events__item"></ul>'}},P={TAXI:"taxi",BUS:"bus",TRAIN:"train",SHIP:"ship",DRIVE:"drive",FLIGHT:"flight",CHECK_IN:"check-in",SIGHTSEEING:"sightseeing",RESTAURANT:"restaurant"},j={basePrice:0,dateFrom:null,dateTo:null,destination:null,id:null,isFavorite:!1,offers:[],type:P.FLIGHT};class x{static getShortRoutePointDto(e){return{id:e.id,basePrice:e.base_price,dateFrom:e.date_from,dateTo:e.date_to,destination:null,isFavorite:e.is_favorite,type:e.type,offers:[]}}static getFullRoutePointDto(e,t,n){const i=x.getDestinationDto(n.find((t=>t.id===e?.destination))),s=e?.offers?.length?e.offers.map((e=>x.getOfferDto(t.find((t=>e===t.id))))).filter(Boolean):[],a=x.getShortRoutePointDto(e);return a.destination=i,a.offers=s,a}static getOfferDto(e){return e?{id:e.id,price:e.price,title:e.title}:null}static getDestinationDto(e){return e?{id:e.id,description:e.description,name:e.name,pictures:e?.pictures?.length?e.pictures.map((e=>({src:e.src,description:e.description}))):[]}:null}static getNewRoutePointDto(){return structuredClone(j)}static getFullRouteInfoDto(e,t,n){return e?{dateFrom:e.routeDateFrom,dateTo:e.routeDateTo,destinationNames:e.middleDestinationIds.map((e=>n.find((t=>t.id===e))?.name)),totalPrice:+e.totalBasePrice+e.offers.reduce(((e,n)=>e+(t.find((e=>e.id===n))?.price??0)),0)}:null}static createRoutePointDataByRoutePointDto(e){return{id:e.id,base_price:e.basePrice,date_from:e.dateFrom,date_to:e.dateTo,destination:e.destination.id,is_favorite:e.isFavorite,type:e.type,offers:e.offers.map((e=>e.id))}}}const Z="DD/MM/YY HH:mm",L="DD:MMM",H="YYYY-MM-DDTHH:mm:ss",Y="YYYY-MM-DD",N="HH:mm",U={[t.EVERYTHING]:(e,t)=>t,[t.FUTURE]:(e,t)=>{const n=B(e);return t.filter((e=>{const{date_from:t}=e;return B(t).isAfter(n)}))},[t.PAST]:(e,t)=>{const n=B(e);return t.filter((e=>{const{date_to:t}=e;return B(t).isBefore(n)}))},[t.PRESENT]:(e,t)=>{const n=B(e,Y);return t.filter((e=>{const{date_from:t,date_to:i}=e,s=B(t),a=B(i);return s.diff(n)<=0&&a.diff(n)>=0}))}},q="view",W="edit",z=q;class J extends M{_state={};updateElement(e){e&&(this._setState(e),this.#c())}_restoreHandlers(){throw new Error("Abstract method not implemented: restoreHandlers")}_setState(e){this._state=structuredClone({...this._state,...e})}#c(){const e=this.element,t=e.parentElement;this.removeElement();const n=this.element;t.replaceChild(n,e),this._restoreHandlers()}}class G extends J{#d=!1;#l=null;#f=null;#u=null;constructor({routePoint:e,getOffers:t,getDestinations:n,onRollupButtonClick:i,onSaveButtonClick:s}){super(),this.#u=s,this.#l=t,this._setState(G.convertDataToState(e,t(e.type),n())),this.#d=!(e.id&&i),this.#d||(this.#f=i),this._restoreHandlers()}get template(){return(({fullDestinations:e,fullOffers:t,...n})=>{const{id:i,type:s,destination:a,offers:r,basePrice:o,dateFrom:c,dateTo:d}=n,l=i?"Delete":"Cancel",f=a?`<section class="event__section  event__section--destination">\n        <h3 class="event__section-title  event__section-title--destination">Destination</h3>\n        <p class="event__destination-description">${a?.description??""}</p>\n        ${u=a?.pictures,u?.length?`<div class="event__photos-container">\n        <div class="event__photos-tape">\n          ${u.map((e=>`<img class="event__photo" src="${e.src}" alt="${e.description}">`)).join("")}\n        </div>\n      </div>`:""}\n          </section>`:"";var u,h,p;return`\n    <form class="event event--edit" action="#" method="post">\n      <header class="event__header">\n        <div class="event__type-wrapper">\n          <label class="event__type  event__type-btn" for="event-type-toggle-${i}">\n            <span class="visually-hidden">Choose event type</span>\n            <img class="event__type-icon" width="17" height="17" src="img/icons/${s}.png" alt="Event type icon">\n          </label>\n          <input class="event__type-toggle  visually-hidden" id="event-type-toggle-${i}" type="checkbox">\n\n          <div class="event__type-list">\n            ${h=s,p=i,`\n    <fieldset class="event__type-group">\n      <legend class="visually-hidden">Event type</legend>\n      ${Object.values(P).map((e=>`\n      <div class="event__type-item">\n        <input id="event-type-${e}-${p}" class="event__type-input  visually-hidden" type="radio" name="event-type" value="${e}" ${e===h?"checked":""}>\n        <label class="event__type-label  event__type-label--${e}" for="event-type-${e}-${p}">${e}</label>\n      </div>`)).join("")}\n    </fielset>\n  `}\n          </div>\n        </div>\n\n        <div class="event__field-group  event__field-group--destination">\n          <label class="event__label  event__type-output" for="event-destination-${i}">\n            ${s}\n          </label>\n          <input class="event__input  event__input--destination" id="event-destination-${i}" type="text" name="event-destination" value="${a?.name??""}" list="destination-list-${i}">\n          ${((e,t)=>e?.length?`<datalist id="destination-list-${t}">\n        ${e.map((e=>`<option value="${e.name}"></option>`)).join("")}\n      </datalist>`:"")(e,i)}\n        </div>\n\n        ${(({dateFrom:e,dateTo:t,id:n})=>{const i=B(e),s=B(t);return`\n    <div class="event__field-group  event__field-group--time">\n      <label class="visually-hidden" for="event-start-time-${n}">From</label>\n      <input class="event__input  event__input--time" id="event-start-time-${n}" type="text" name="event-start-time" value="${e?i.format(Z):""}">\n      &mdash;\n      <label class="visually-hidden" for="event-end-time-${n}">To</label>\n      <input class="event__input  event__input--time" id="event-end-time-1" type="text" name="event-end-time" value="${t?s.format(Z):""}">\n    </div>`})({id:i,dateFrom:c,dateTo:d})}\n        ${(({id:e,basePrice:t=0})=>`\n  <div class="event__field-group  event__field-group--price">\n    <label class="event__label" for="event-price-${e}">\n      <span class="visually-hidden">Price</span>\n      &euro;\n    </label>\n    <input class="event__input  event__input--price" id="event-price-${e}" type="text" name="event-price" value="${t}">\n  </div>`)({id:i,basePrice:o})}\n\n        <button class="event__save-btn  btn  btn--blue" type="submit">Save</button>\n        <button class="event__reset-btn" type="reset">${l}</button>\n        ${i&&'\n          <button class="event__rollup-btn" type="button">\n            <span class="visually-hidden">Open event</span>\n          </button>'}\n      </header>\n      <section class="event__details">\n        ${((e,t)=>t?.length?`<section class="event__section  event__section--offers">\n        <h3 class="event__section-title  event__section-title--offers">Offers</h3>\n        <div class="event__available-offers">\n          ${t.map((t=>{const n=e.some((e=>e.id===t.id))?"checked":"",i=`data-offer-id="${t.id}"`;return`\n    <div class="event__offer-selector">\n      <input class="event__offer-checkbox  visually-hidden" id="event-offer-luggage-${t.id}" ${i} type="checkbox" name="event-offer-luggage" ${n}>\n      <label class="event__offer-label" for="event-offer-luggage-${t.id}">\n        <span class="event__offer-title">${t.title}</span>\n        &plus;&euro;&nbsp;\n        <span class="event__offer-price">${t.price}</span>\n      </label>\n    </div>`})).join("")}\n        </div>\n      </section>`:"")(r,t)}\n        ${f}\n      </section>\n    </form>\n  `})(this._state)}#h=e=>{const t=e.target?.value?.toLowerCase();let n=this._state.fullDestinations.find((e=>e.name.toLowerCase()===t));n||(n=this._state.fullDestinations.find((e=>e.name.toLowerCase().includes(t)))),this.updateElement({destination:n||null})};#p=e=>{e.preventDefault();const t=e.target?.value??this._state.type;t!==this._state.type&&e.target?.checked&&this.updateElement({offers:[],fullOffers:this.#l(t),type:t})};#b=e=>{e.preventDefault(),this.#u()};#m=e=>{e.preventDefault(),this.#f()};#v=e=>{e.preventDefault();const t=e.target;if("event-offer-luggage"===t?.name){const e=t.dataset.offerId,n=this._state.fullOffers.find((t=>t.id===e));n&&this.updateElement({offers:t?.checked?[...this._state.offers,n]:this._state.offers.filter((e=>e.id!==n.id))})}};_restoreHandlers(){this.element.addEventListener("submit",this.#b),this.element.querySelector(".event__type-group").addEventListener("change",this.#p),this.element.querySelector(".event__input--destination").addEventListener("blur",this.#h),this.element.querySelector(".event__section--offers").addEventListener("change",this.#v),this.#d||this.element.querySelector(".event__rollup-btn").addEventListener("click",this.#m)}static convertDataToState(e,t,n){return{...e,fullDestinations:n,fullOffers:t}}static convertStateToData(e){const t={...e};return delete t.fullDestinations,delete t.fullOffers,t}}const X=G,K=class extends M{#_=null;#m=null;#g=null;constructor({routePoint:e,onRollupButtonClick:t,onFavoriteButtonClickCallback:n}){super(),this.#_=e,this.#m=t,this.#g=n,this.element.querySelector(".event__rollup-btn").addEventListener("click",this.#y),this.element.querySelector(".event__favorite-btn").addEventListener("click",this.#w)}get template(){return(({data:e})=>{const{destination:t,type:n,basePrice:i,dateFrom:s,dateTo:a,offers:r,isFavorite:o}=e,c=B(s),d=B(a),l=o?"event__favorite-btn--active":"";return`\n    <div class="event">\n      <time class="event__date" datetime="${c.format(Y)}">${c.format("MMM:DD").replace(":"," ")}</time>\n      <div class="event__type">\n        <img class="event__type-icon" width="42" height="42" src="img/icons/${n}.png" alt="Event type icon">\n      </div>\n      <h3 class="event__title">${n} ${t.name}</h3>\n      ${(({eventBegin:e,eventEnd:t})=>{const n=(e=>{const t=e%60,n=(e-t)/60,i=n%24;return{days:(n-i)/24,hours:i,minutes:t}})(t.diff(e,"minute"));return`\n    <div class="event__schedule">\n      <p class="event__time">\n        <time class="event__start-time" datetime="${e.format(H)}">${e.format(N)}</time>\n        &mdash;\n        <time class="event__end-time" datetime="${t.format(H)}">${t.format(N)}</time>\n      </p>\n      <p class="event__duration">${(({days:e,hours:t,minutes:n})=>{let i="";const s=(e,t)=>{e>0&&(i=`${i} ${e}${t.toUpperCase()}`)};return s(e,"d"),s(t,"h"),s(n,"m"),i.trim()})(n)}</p>\n    </div>\n  `})({eventBegin:c,eventEnd:d})}\n      <p class="event__price">\n        &euro;&nbsp;<span class="event__price-value">${i}</span>\n      </p>\n      <h4 class="visually-hidden">Offers:</h4>\n      ${((e=[])=>e.length>0?`<ul class="event__selected-offers">\n        ${e.map((({title:e,price:t})=>`\n    <li class="event__offer">\n      <span class="event__offer-title">${e}</span>\n      +&euro;&nbsp;\n      <span class="event__offer-price">${t}</span>\n    </li>`)).join("")}\n      </ul>`:"")(r)}\n      <button class="event__favorite-btn ${l}" type="button">\n        <span class="visually-hidden">Add to favorite</span>\n        <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n          <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"></path>\n        </svg>\n      </button>\n      <button class="event__rollup-btn" type="button">\n        <span class="visually-hidden">Open event</span>\n      </button>\n    </div>`})({data:this.#_})}#y=e=>{e.preventDefault(),this.#m()};#w=e=>{e.preventDefault(),this.#g()}},Q=x,ee=class extends e{#_=null;#$=null;#M=null;#T=z;#f=null;constructor({rootElement:e,routePoint:t,onRollupClickCallback:n,...i}){super(i),this.#M=e,this.#_=t,this.#f=n}#C(e){if(e instanceof M){const t=new A;return a(e,t.element),t}}#E(e){e instanceof M&&(this.#$?(r(e,this.#$),o(this.#$)):a(this.#C(e),this.#M),this.#$=e)}#D=e=>{"Escape"===e.key&&this.#k()};#S(){this.#T===q&&this.#V(W)}#k(){this.#T===W&&(document.removeEventListener("keydown",this.#D),this.#V(q))}#w(){this._routeModel.updateRoutePoint(Q.createRoutePointDataByRoutePointDto({...this.#_,isFavorite:!this.#_.isFavorite})),this.#_=Q.getFullRoutePointDto(this._routeModel.getRoutePointById(this.#_.id),this._offerModel.getOffersByEventType(this.#_.type),this._routeDestinationModel.data),this.#V(this.#T)}#B(){return new X({routePoint:this.#_,getOffers:e=>this._offerModel.getOffersByEventType(e).map((e=>Q.getOfferDto(e))),getDestinations:()=>this._routeDestinationModel.data.map((e=>Q.getDestinationDto(e))),onRollupButtonClick:()=>{this.#k()},onSaveButtonClick:()=>this.#k()})}#R(){return new K({routePoint:this.#_,onRollupButtonClick:()=>{this.#f(),this.#S(),document.addEventListener("keydown",this.#D)},onFavoriteButtonClickCallback:()=>this.#w()})}#V(e=z){this.#T=e;const t=this.#F(e);t instanceof M&&this.#E(t)}#F(e=z){switch(e){case W:return this.#B();case q:return this.#R()}}resetView(){this.#T!==z&&this.#V(z)}init(e=null){e&&(this.#_=e),this.#V(z)}};class te extends e{#t=i;#a=E;#I=null;#O=null;#A=new I;#P=new Map;#j=new O;#x=null;#Z=null;#L=null;#H=null;constructor({destroyMessageView:e,showMessage:t,rootElement:n,headerRootElement:i,...s}){super(s),this.#x=n,this.#Z=i,this.#L=t,this.#H=e}#Y(){this.#P.forEach((e=>{e.resetView()}))}#N(e){e&&e!==this.#t&&(this.#t=e,this.#a=E,this.#H(),this.#U(),this.#q(),this.#W())}#z(e){e&&e!==this.#a&&(this.#a=e,this.#U(),this.#W())}#J(e){const t=e.id;t&&this.#P.get(t)?.init(e)}#W(){o(this.#j),a(this.#j,this.#x),this.#P.clear();const e=U[this.#t],t=R[this.#a],n=e(new Date,this._routeModel.data);0===n.length&&this.#L(`There are no ${this.#t} events now`),t(n).map((e=>x.getFullRoutePointDto(e,this._offerModel.getOffersByEventType(e.type),this._routeDestinationModel.data))).forEach((e=>{this.#P.has(e.id)||this.#P.set(e.id,new ee({destinationModel:this._routeDestinationModel,offerModel:this._offerModel,rootElement:this.#j.element,routeModel:this._routeModel,onRollupClickCallback:()=>this.#Y(),routePoint:e})),this.#J(e)}))}#q(){const e=new T({filterTypes:Object.values(t),onFilterChange:e=>{this.#N(e)},filtersRecordCountInfo:this._routeModel.getRoutesCountByFilters(U,new Date),activeFilterType:this.#t});this.#O?(r(e,this.#O),o(this.#O)):a(e,this.#Z.querySelector(".trip-controls__filters")),this.#O=e}#G(){a(this.#A,this.#Z)}#U(){if(this._routeModel.data.length>0){const e=new F({onSortingChangeCallback:e=>{this.#z(e)},activeSortType:this.#a});this.#I?(r(e,this.#I),o(this.#I)):a(e,this.#x.querySelector("h2"),"afterend"),this.#I=e}}init(){this.#q(),this.#U(),this.#G(),0!==this._routeModel.data.length?this.#W():this.#L("Click New Event to create your first point")}}const ne=class extends M{#X=null;constructor({data:e}){super(),this.#X=e}get template(){return(e=>{if(!e)return"";const t=B(e.dateFrom),n=B(e.dateTo);return`\n    <section class="trip-main__trip-info  trip-info">\n      <div class="trip-info__main">\n        ${(({destinationNames:e})=>e.length>0?`\n      <h1 class="trip-info__title">\n        ${e.length<=3?e.join("&nbsp;&mdash;&nbsp;"):`${e[0]}&nbsp;&mdash;&nbsp;...&nbsp;&mdash;&nbsp;${e[e.length-1]}`}\n      </h1>`:"")(e)}\n        ${((e,t)=>{const n=e.diff(t);return`\n    <p class="trip-info__dates">\n      ${t.format(L).replace(":"," ")}\n      ${0!==n?`&nbsp;&mdash;&nbsp;${e.format(L).replace(":"," ")}`:""}\n    </p>`})(n,t)}\n      </div>\n\n      <p class="trip-info__cost">\n        Total: &euro;&nbsp;<span class="trip-info__cost-value">${e.totalPrice}</span>\n      </p>\n    </section>`})(this.#X)}};class ie extends e{#K=null;#M=null;constructor({headerRootElement:e,...t}){super(t),this.#M=e}#Q(){const e=Q.getFullRouteInfoDto(this._routeModel.getFullRouteInfo(),this._offerModel.getAllOffers(),this._routeDestinationModel.data);e&&(this.#K=new ne({data:e}),a(this.#K,this.#M,"afterbegin"))}init(){this.#Q()}}const se=class extends M{#ee=null;constructor({message:e}){super(),this.#ee=e}get template(){return(e=this.#ee)?`<p class="trip-events__msg">${e}</p>`:"";var e}},ae=document.querySelector(".trip-main"),re=document.querySelector(".trip-events");class oe extends e{#te=null;#ne=null;#ie=!1;#se=null;constructor(e){super(e),this.#te=new te({...e,rootElement:re,headerRootElement:ae,showMessage:this.#ae,destroyMessageView:this.#H}),this.#ne=new ie({...e,headerRootElement:ae})}#H=()=>{this.#se&&(o(this.#se),this.#se=null)};#ae=e=>{const t=new se({message:e});this.#se?r(t,this.#se):a(t,re,s),this.#se=t};#re(){this.#se&&(o(this.#se),this.#se=null),this.#te.init(this.#ie),this.#ne.init()}init(){Promise.all([this._offerModel.init(),this._routeDestinationModel.init(),this._routeModel.init()]).catch((e=>{this.#ae(e)})).finally((()=>{this.#re()}))}}class ce{#oe=null;#ce=null;constructor({defaultData:e}){if(new.target===ce)throw new Error("Model is Abstract class!!");this.#ce=e}get data(){return this.#oe??this.#ce}set data(e){this.#oe=e}async _fetchData({fetchFn:e}){this.#oe=await e()}async init(){throw new Error("Method init is abstract!")}}const de=JSON.parse('[\n  {\n    "id": "1167e634-9406-429b-a249-11bb2c57482c",\n    "base_price": 8332,\n    "date_from": "2024-10-22T11:02:17.074Z",\n    "date_to": "2024-10-23T04:00:17.074Z",\n    "destination": "f0281b25-7390-47d8-b1bd-c5c4628c4a0a",\n    "is_favorite": true,\n    "offers": [\n      "f3363117-7d95-47cb-94dd-0554732b1442"\n    ],\n    "type": "train"\n  },\n  {\n    "id": "09b853c1-6725-4b0e-96ab-0961c4eb1ddd",\n    "base_price": 2932,\n    "date_from": "2024-10-24T21:12:17.074Z",\n    "date_to": "2024-10-25T16:18:17.074Z",\n    "destination": "c675c4c0-be22-4308-b48d-bb2b83fbf8bf",\n    "is_favorite": true,\n    "offers": [\n      "b1025907-4092-4ae0-a00b-8a7709c13bb0",\n      "a3f277e9-d7c1-49be-85b4-3a50b885edbd",\n      "234432b2-bc69-48c0-841c-e8dc7e8a0119",\n      "ed53bfa7-4300-4ab0-ac12-778a90dd4a73",\n      "44794498-dfe9-41eb-a888-c346d5634d1c"\n    ],\n    "type": "check-in"\n  },\n  {\n    "id": "f2b91597-f7de-4aa8-b26b-248155e06d6f",\n    "base_price": 8867,\n    "date_from": "2024-10-27T08:00:17.074Z",\n    "date_to": "2024-10-27T15:22:17.074Z",\n    "destination": "13ddcced-bab4-4593-8848-2457ef02d2c6",\n    "is_favorite": true,\n    "offers": [],\n    "type": "check-in"\n  },\n  {\n    "id": "76d6d828-9652-4352-82ff-8665e3a5a531",\n    "base_price": 5554,\n    "date_from": "2024-10-28T22:09:17.074Z",\n    "date_to": "2024-10-29T21:48:17.074Z",\n    "destination": "410df6a2-db0e-48da-a7b1-0ff5affbbb84",\n    "is_favorite": true,\n    "offers": [\n      "a3f277e9-d7c1-49be-85b4-3a50b885edbd",\n      "234432b2-bc69-48c0-841c-e8dc7e8a0119",\n      "ed53bfa7-4300-4ab0-ac12-778a90dd4a73",\n      "44794498-dfe9-41eb-a888-c346d5634d1c"\n    ],\n    "type": "check-in"\n  },\n  {\n    "id": "198e2cfd-28d0-4b50-9eb4-493a7d010b67",\n    "base_price": 3941,\n    "date_from": "2024-10-31T18:45:17.074Z",\n    "date_to": "2024-11-02T03:39:17.074Z",\n    "destination": "98e910de-0335-4b0f-88af-cde7eca4bb26",\n    "is_favorite": true,\n    "offers": [],\n    "type": "sightseeing"\n  },\n  {\n    "id": "75976b30-cae8-437e-b1b1-02e118e2c158",\n    "base_price": 4816,\n    "date_from": "2024-11-02T13:44:17.074Z",\n    "date_to": "2024-11-03T12:07:17.074Z",\n    "destination": "398f4bf0-08ca-4f02-8c49-2e784e1466ed",\n    "is_favorite": true,\n    "offers": [],\n    "type": "sightseeing"\n  },\n  {\n    "id": "e78ca8a7-1d20-48c1-8606-3a4c9f4e85ac",\n    "base_price": 3268,\n    "date_from": "2024-11-04T07:28:17.074Z",\n    "date_to": "2024-11-05T06:00:17.074Z",\n    "destination": "98e910de-0335-4b0f-88af-cde7eca4bb26",\n    "is_favorite": false,\n    "offers": [\n      "9dca0ca2-966e-4718-8d14-3ef7f121fa0a"\n    ],\n    "type": "bus"\n  },\n  {\n    "id": "69f13e92-4374-4130-8a6d-cc2e47b9b79e",\n    "base_price": 2827,\n    "date_from": "2024-11-06T18:40:17.074Z",\n    "date_to": "2024-11-08T10:00:17.074Z",\n    "destination": "13ddcced-bab4-4593-8848-2457ef02d2c6",\n    "is_favorite": false,\n    "offers": [],\n    "type": "check-in"\n  },\n  {\n    "id": "2e6d1dca-b745-4965-939a-cdb2b206c8fc",\n    "base_price": 5995,\n    "date_from": "2024-11-09T19:17:17.074Z",\n    "date_to": "2024-11-10T20:15:17.074Z",\n    "destination": "2598d3f0-f078-405b-a0e1-3c8b8b368f5a",\n    "is_favorite": true,\n    "offers": [\n      "5570fb65-dbd2-490c-bc73-10eba5faed57",\n      "a4940f3c-ce6d-45e1-9fb5-43dc5e6c343f",\n      "2ee81745-5b9c-479c-896b-09783e6917ec"\n    ],\n    "type": "ship"\n  },\n  {\n    "id": "5c64404b-7b39-4c91-8fb2-e36bf81029ba",\n    "base_price": 3614,\n    "date_from": "2024-11-12T13:37:17.074Z",\n    "date_to": "2024-11-14T01:49:17.074Z",\n    "destination": "35834a98-0e4d-4fcd-8cdc-69cc7e48c365",\n    "is_favorite": true,\n    "offers": [\n      "6972c573-f47b-4325-a582-e1cf73e35958",\n      "2b5b3ae7-1305-4b36-a99d-db2dab930120"\n    ],\n    "type": "taxi"\n  },\n  {\n    "id": "13f736e3-d89d-43a1-ad15-6046fecd9c5e",\n    "base_price": 1267,\n    "date_from": "2024-11-16T02:44:17.074Z",\n    "date_to": "2024-11-16T10:50:17.074Z",\n    "destination": "2598d3f0-f078-405b-a0e1-3c8b8b368f5a",\n    "is_favorite": false,\n    "offers": [],\n    "type": "taxi"\n  },\n  {\n    "id": "aec71330-e56a-43ae-8850-2773352047e8",\n    "base_price": 417,\n    "date_from": "2024-11-17T03:16:17.074Z",\n    "date_to": "2024-11-18T20:23:17.074Z",\n    "destination": "d7897530-315e-45a7-afcf-3e01e4b33169",\n    "is_favorite": true,\n    "offers": [],\n    "type": "sightseeing"\n  },\n  {\n    "id": "e820a3ae-d7d1-45d3-8c8a-5e50a877e115",\n    "base_price": 8415,\n    "date_from": "2024-11-19T11:42:17.074Z",\n    "date_to": "2024-11-21T09:00:17.074Z",\n    "destination": "13ddcced-bab4-4593-8848-2457ef02d2c6",\n    "is_favorite": false,\n    "offers": [\n      "f3363117-7d95-47cb-94dd-0554732b1442"\n    ],\n    "type": "train"\n  },\n  {\n    "id": "7e508f50-bb54-4bc0-82b5-a47981587048",\n    "base_price": 2276,\n    "date_from": "2024-11-21T22:55:17.074Z",\n    "date_to": "2024-11-23T21:05:17.074Z",\n    "destination": "8965401b-7372-45d4-b7d1-212eff64c3ce",\n    "is_favorite": false,\n    "offers": [\n      "d2941105-a655-426f-a40f-d482483a0f14",\n      "c13277fa-5487-42c8-a64a-c2da79d1d0b8",\n      "25767bb6-241f-48bc-8ef8-8104d4392d26",\n      "6972c573-f47b-4325-a582-e1cf73e35958",\n      "2b5b3ae7-1305-4b36-a99d-db2dab930120"\n    ],\n    "type": "taxi"\n  },\n  {\n    "id": "f86f2e46-a732-479a-835e-c3668fc3173f",\n    "base_price": 4718,\n    "date_from": "2024-11-24T04:11:17.074Z",\n    "date_to": "2024-11-24T21:20:17.074Z",\n    "destination": "c675c4c0-be22-4308-b48d-bb2b83fbf8bf",\n    "is_favorite": true,\n    "offers": [\n      "99d83a2b-5ed5-42c1-b590-f6030c3ce764"\n    ],\n    "type": "restaurant"\n  },\n  {\n    "id": "5f958d38-dd75-4af5-bff7-f12c211b67bc",\n    "base_price": 7246,\n    "date_from": "2024-11-25T19:21:17.074Z",\n    "date_to": "2024-11-26T03:45:17.074Z",\n    "destination": "98e910de-0335-4b0f-88af-cde7eca4bb26",\n    "is_favorite": false,\n    "offers": [\n      "f3363117-7d95-47cb-94dd-0554732b1442"\n    ],\n    "type": "train"\n  },\n  {\n    "id": "084b1127-3300-4cf1-a05f-517d3f5e9771",\n    "base_price": 4464,\n    "date_from": "2024-11-27T17:11:17.074Z",\n    "date_to": "2024-11-28T10:43:17.074Z",\n    "destination": "13ddcced-bab4-4593-8848-2457ef02d2c6",\n    "is_favorite": false,\n    "offers": [],\n    "type": "taxi"\n  },\n  {\n    "id": "908e8f49-74ed-4a1f-897b-fab7147a0353",\n    "base_price": 1279,\n    "date_from": "2024-11-29T00:01:17.074Z",\n    "date_to": "2024-11-30T01:14:17.074Z",\n    "destination": "2598d3f0-f078-405b-a0e1-3c8b8b368f5a",\n    "is_favorite": false,\n    "offers": [\n      "c13277fa-5487-42c8-a64a-c2da79d1d0b8",\n      "25767bb6-241f-48bc-8ef8-8104d4392d26",\n      "6972c573-f47b-4325-a582-e1cf73e35958",\n      "2b5b3ae7-1305-4b36-a99d-db2dab930120"\n    ],\n    "type": "taxi"\n  },\n  {\n    "id": "1957677b-ea8b-4241-8c62-4df27222e669",\n    "base_price": 669,\n    "date_from": "2024-12-01T02:06:17.074Z",\n    "date_to": "2024-12-02T18:51:17.074Z",\n    "destination": "2598d3f0-f078-405b-a0e1-3c8b8b368f5a",\n    "is_favorite": true,\n    "offers": [\n      "958489ee-6517-44b5-8235-e3ce477f1724",\n      "8c3f890d-82fe-442e-9817-e32da42aeb67",\n      "9dca0ca2-966e-4718-8d14-3ef7f121fa0a"\n    ],\n    "type": "bus"\n  },\n  {\n    "id": "dff497c8-4160-4e0c-8a46-e788380916a6",\n    "base_price": 6178,\n    "date_from": "2024-12-03T01:39:17.074Z",\n    "date_to": "2024-12-03T19:14:17.074Z",\n    "destination": "398f4bf0-08ca-4f02-8c49-2e784e1466ed",\n    "is_favorite": false,\n    "offers": [\n      "958489ee-6517-44b5-8235-e3ce477f1724",\n      "8c3f890d-82fe-442e-9817-e32da42aeb67",\n      "9dca0ca2-966e-4718-8d14-3ef7f121fa0a"\n    ],\n    "type": "bus"\n  },\n  {\n    "id": "3d9ecd7e-196c-4e5d-8f38-e7270f3899ef",\n    "base_price": 3461,\n    "date_from": "2024-12-04T17:50:17.074Z",\n    "date_to": "2024-12-05T05:57:17.074Z",\n    "destination": "f0281b25-7390-47d8-b1bd-c5c4628c4a0a",\n    "is_favorite": true,\n    "offers": [\n      "fa564508-0ce5-4dd4-9bac-26a7476dce52",\n      "e8bfc2ed-34fd-45ad-b25e-1c142b853275"\n    ],\n    "type": "drive"\n  },\n  {\n    "id": "cbd37817-1f5c-4431-8471-9a89cd6d0e93",\n    "base_price": 6108,\n    "date_from": "2024-12-06T05:15:17.074Z",\n    "date_to": "2024-12-06T13:17:17.074Z",\n    "destination": "f0281b25-7390-47d8-b1bd-c5c4628c4a0a",\n    "is_favorite": false,\n    "offers": [\n      "2430b58a-83b8-4de9-9e17-29832553f916",\n      "1fb92974-efcf-4ab9-b14a-dd6be96116f6",\n      "a80bfc1b-4642-4049-8e13-7ad62cd3637d",\n      "98a079d2-ed59-4d03-a6e0-3b2e3d834b18"\n    ],\n    "type": "flight"\n  },\n  {\n    "id": "72d010b6-4e0d-4083-94a6-950352d3890e",\n    "base_price": 3883,\n    "date_from": "2024-12-08T05:54:17.074Z",\n    "date_to": "2024-12-09T04:25:17.074Z",\n    "destination": "8965401b-7372-45d4-b7d1-212eff64c3ce",\n    "is_favorite": false,\n    "offers": [\n      "d2941105-a655-426f-a40f-d482483a0f14",\n      "c13277fa-5487-42c8-a64a-c2da79d1d0b8",\n      "25767bb6-241f-48bc-8ef8-8104d4392d26",\n      "6972c573-f47b-4325-a582-e1cf73e35958",\n      "2b5b3ae7-1305-4b36-a99d-db2dab930120"\n    ],\n    "type": "taxi"\n  },\n  {\n    "id": "4910f70f-b07f-4c82-81b5-85dd87607187",\n    "base_price": 7962,\n    "date_from": "2024-12-10T07:34:17.074Z",\n    "date_to": "2024-12-11T08:58:17.074Z",\n    "destination": "398f4bf0-08ca-4f02-8c49-2e784e1466ed",\n    "is_favorite": false,\n    "offers": [],\n    "type": "sightseeing"\n  },\n  {\n    "id": "5a89e322-a7b4-4db5-81fb-f1f571a50a98",\n    "base_price": 5990,\n    "date_from": "2024-12-12T03:47:17.074Z",\n    "date_to": "2024-12-13T15:58:17.074Z",\n    "destination": "35834a98-0e4d-4fcd-8cdc-69cc7e48c365",\n    "is_favorite": true,\n    "offers": [\n      "2ee81745-5b9c-479c-896b-09783e6917ec"\n    ],\n    "type": "ship"\n  }\n]'),le=async(e=6)=>{const t=[];for(let i=0;i<e;i++)t.push(structuredClone((n=de,Array.isArray(n)?n[Math.floor(Math.random()*n.length)]:null)));var n;return t};class fe extends ce{constructor(){super({defaultData:[]})}async init(){super._fetchData({fetchFn:le})}getRoutePointById(e){return this.data.find((t=>t.id===e))}updateRoutePoint(e){this.data=((t,n)=>{const i=[...t].filter((t=>t.id!==e.id)??(e=>e===n));return i.push(n),i})(this.data,e)}getFullRouteInfo(){const e=(0,R[C.DAY])(this.data);if(e.length>0){const t={totalBasePrice:0,offers:[],routeDateTo:e[e.length-1].date_from,routeDateFrom:e[0].date_from,middleDestinationIds:[]};return e.reduce(((e,t)=>{const n=[...e.middleDestinationIds];return n.find((e=>t.destination===e))||n.push(t.destination),{...e,totalBasePrice:e.totalBasePrice+t.base_price,offers:[...e.offers,...t.offers??[]],middleDestinationIds:n}}),t)}return null}getRoutesCountByFilters(e,t){return Object.keys(e).reduce(((n,i)=>{const s=e[i];return{...n,[i]:s(t,this.data)?.length??0}}),{})}}const ue=JSON.parse('\n[\n  {\n    "type": "taxi",\n    "offers": [\n      {\n        "id": "d2941105-a655-426f-a40f-d482483a0f14",\n        "title": "Upgrade to a business class",\n        "price": 86\n      },\n      {\n        "id": "c13277fa-5487-42c8-a64a-c2da79d1d0b8",\n        "title": "Choose the radio station",\n        "price": 47\n      },\n      {\n        "id": "25767bb6-241f-48bc-8ef8-8104d4392d26",\n        "title": "Choose temperature",\n        "price": 33\n      },\n      {\n        "id": "6972c573-f47b-4325-a582-e1cf73e35958",\n        "title": "Drive quickly, I\'m in a hurry",\n        "price": 144\n      },\n      {\n        "id": "2b5b3ae7-1305-4b36-a99d-db2dab930120",\n        "title": "Drive slowly",\n        "price": 199\n      }\n    ]\n  },\n  {\n    "type": "bus",\n    "offers": [\n      {\n        "id": "958489ee-6517-44b5-8235-e3ce477f1724",\n        "title": "Infotainment system",\n        "price": 186\n      },\n      {\n        "id": "8c3f890d-82fe-442e-9817-e32da42aeb67",\n        "title": "Order meal",\n        "price": 56\n      },\n      {\n        "id": "9dca0ca2-966e-4718-8d14-3ef7f121fa0a",\n        "title": "Choose seats",\n        "price": 104\n      }\n    ]\n  },\n  {\n    "type": "train",\n    "offers": [\n      {\n        "id": "3c43187c-cd18-452d-a50a-823b0df4f83b",\n        "title": "Book a taxi at the arrival point",\n        "price": 59\n      },\n      {\n        "id": "7d3c2199-2aa4-46b6-b19c-1e40f8a3f9d4",\n        "title": "Order a breakfast",\n        "price": 101\n      },\n      {\n        "id": "f3363117-7d95-47cb-94dd-0554732b1442",\n        "title": "Wake up at a certain time",\n        "price": 86\n      }\n    ]\n  },\n  {\n    "type": "flight",\n    "offers": [\n      {\n        "id": "25de60b7-6aed-4942-9550-a0424654ba3f",\n        "title": "Choose meal",\n        "price": 140\n      },\n      {\n        "id": "f54787c4-6a07-4dc2-81d3-e7f8c1ffca10",\n        "title": "Choose seats",\n        "price": 199\n      },\n      {\n        "id": "2430b58a-83b8-4de9-9e17-29832553f916",\n        "title": "Upgrade to comfort class",\n        "price": 58\n      },\n      {\n        "id": "1fb92974-efcf-4ab9-b14a-dd6be96116f6",\n        "title": "Upgrade to business class",\n        "price": 78\n      },\n      {\n        "id": "a80bfc1b-4642-4049-8e13-7ad62cd3637d",\n        "title": "Add luggage",\n        "price": 70\n      },\n      {\n        "id": "98a079d2-ed59-4d03-a6e0-3b2e3d834b18",\n        "title": "Business lounge",\n        "price": 181\n      }\n    ]\n  },\n  {\n    "type": "check-in",\n    "offers": [\n      {\n        "id": "b1025907-4092-4ae0-a00b-8a7709c13bb0",\n        "title": "Choose the time of check-in",\n        "price": 178\n      },\n      {\n        "id": "a3f277e9-d7c1-49be-85b4-3a50b885edbd",\n        "title": "Choose the time of check-out",\n        "price": 195\n      },\n      {\n        "id": "234432b2-bc69-48c0-841c-e8dc7e8a0119",\n        "title": "Add breakfast",\n        "price": 197\n      },\n      {\n        "id": "ed53bfa7-4300-4ab0-ac12-778a90dd4a73",\n        "title": "Laundry",\n        "price": 193\n      },\n      {\n        "id": "44794498-dfe9-41eb-a888-c346d5634d1c",\n        "title": "Order a meal from the restaurant",\n        "price": 96\n      }\n    ]\n  },\n  {\n    "type": "sightseeing",\n    "offers": []\n  },\n  {\n    "type": "ship",\n    "offers": [\n      {\n        "id": "8e79ea2e-8700-48a7-bed0-3bb1996399e0",\n        "title": "Choose meal",\n        "price": 199\n      },\n      {\n        "id": "2be7313e-e030-47e8-8579-027085436e6f",\n        "title": "Choose seats",\n        "price": 100\n      },\n      {\n        "id": "aa424fa0-5a00-4580-91f3-a7d08c8098d1",\n        "title": "Upgrade to comfort class",\n        "price": 40\n      },\n      {\n        "id": "5570fb65-dbd2-490c-bc73-10eba5faed57",\n        "title": "Upgrade to business class",\n        "price": 67\n      },\n      {\n        "id": "a4940f3c-ce6d-45e1-9fb5-43dc5e6c343f",\n        "title": "Add luggage",\n        "price": 49\n      },\n      {\n        "id": "2ee81745-5b9c-479c-896b-09783e6917ec",\n        "title": "Business lounge",\n        "price": 85\n      }\n    ]\n  },\n  {\n    "type": "drive",\n    "offers": [\n      {\n        "id": "fa564508-0ce5-4dd4-9bac-26a7476dce52",\n        "title": "With automatic transmission",\n        "price": 121\n      },\n      {\n        "id": "e8bfc2ed-34fd-45ad-b25e-1c142b853275",\n        "title": "With air conditioning",\n        "price": 133\n      }\n    ]\n  },\n  {\n    "type": "restaurant",\n    "offers": [\n      {\n        "id": "cb6b44c3-88e9-407a-af76-f2ab8af12bd3",\n        "title": "Choose live music",\n        "price": 53\n      },\n      {\n        "id": "99d83a2b-5ed5-42c1-b590-f6030c3ce764",\n        "title": "Choose VIP area",\n        "price": 197\n      }\n    ]\n  }\n]'),he=async()=>structuredClone(ue);class pe extends ce{constructor(){super({defaultData:[]})}async init(){super._fetchData({fetchFn:he})}getOffersByEventType(e){return this.data.find((t=>e===t.type))?.offers??[]}getAllOffers(){return this.data.reduce(((e,t)=>(t?.offers?.length??0)>0?[...e,...t.offers]:e),[])}}const be=JSON.parse('\n[\n  {\n    "id": "8965401b-7372-45d4-b7d1-212eff64c3ce",\n    "description": "Madrid - full of of cozy canteens where you can try the best coffee in the Middle East",\n    "name": "Madrid",\n    "pictures": []\n  },\n  {\n    "id": "2598d3f0-f078-405b-a0e1-3c8b8b368f5a",\n    "description": "Oslo - with a beautiful old town",\n    "name": "Oslo",\n    "pictures": []\n  },\n  {\n    "id": "35834a98-0e4d-4fcd-8cdc-69cc7e48c365",\n    "description": "Munich - for those who value comfort and coziness",\n    "name": "Munich",\n    "pictures": [\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/5.jpg",\n        "description": "Munich with a beautiful old town"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/18.jpg",\n        "description": "Munich with crowded streets"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/2.jpg",\n        "description": "Munich with an embankment of a mighty river as a centre of attraction"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/8.jpg",\n        "description": "Munich famous for its crowded street markets with the best street food in Asia"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/11.jpg",\n        "description": "Munich middle-eastern paradise"\n      }\n    ]\n  },\n  {\n    "id": "f0281b25-7390-47d8-b1bd-c5c4628c4a0a",\n    "description": "Monaco - in a middle of Europe",\n    "name": "Monaco",\n    "pictures": [\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/9.jpg",\n        "description": "Monaco a perfect place to stay with a family"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/4.jpg",\n        "description": "Monaco a perfect place to stay with a family"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/11.jpg",\n        "description": "Monaco for those who value comfort and coziness"\n      }\n    ]\n  },\n  {\n    "id": "398f4bf0-08ca-4f02-8c49-2e784e1466ed",\n    "description": "Den Haag - with crowded streets",\n    "name": "Den Haag",\n    "pictures": [\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/17.jpg",\n        "description": "Den Haag is a beautiful city"\n      }\n    ]\n  },\n  {\n    "id": "13ddcced-bab4-4593-8848-2457ef02d2c6",\n    "description": "Moscow - famous for its crowded street markets with the best street food in Asia",\n    "name": "Moscow",\n    "pictures": [\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/19.jpg",\n        "description": "Moscow in a middle of Europe"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/9.jpg",\n        "description": "Moscow middle-eastern paradise"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/18.jpg",\n        "description": "Moscow in a middle of Europe"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/13.jpg",\n        "description": "Moscow with crowded streets"\n      }\n    ]\n  },\n  {\n    "id": "98e910de-0335-4b0f-88af-cde7eca4bb26",\n    "description": "Valencia - famous for its crowded street markets with the best street food in Asia",\n    "name": "Valencia",\n    "pictures": [\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/4.jpg",\n        "description": "Valencia with a beautiful old town"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/5.jpg",\n        "description": "Valencia in a middle of Europe"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/11.jpg",\n        "description": "Valencia a perfect place to stay with a family"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/17.jpg",\n        "description": "Valencia is a beautiful city"\n      }\n    ]\n  },\n  {\n    "id": "c675c4c0-be22-4308-b48d-bb2b83fbf8bf",\n    "description": "Rome - in a middle of Europe",\n    "name": "Rome",\n    "pictures": [\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/4.jpg",\n        "description": "Rome for those who value comfort and coziness"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/6.jpg",\n        "description": "Rome for those who value comfort and coziness"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/17.jpg",\n        "description": "Rome in a middle of Europe"\n      }\n    ]\n  },\n  {\n    "id": "410df6a2-db0e-48da-a7b1-0ff5affbbb84",\n    "description": "Berlin - middle-eastern paradise",\n    "name": "Berlin",\n    "pictures": [\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/7.jpg",\n        "description": "Berlin famous for its crowded street markets with the best street food in Asia"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/12.jpg",\n        "description": "Berlin is a beautiful city"\n      }\n    ]\n  },\n  {\n    "id": "d7897530-315e-45a7-afcf-3e01e4b33169",\n    "description": "Rotterdam - a true asian pearl",\n    "name": "Rotterdam",\n    "pictures": [\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/5.jpg",\n        "description": "Rotterdam for those who value comfort and coziness"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/14.jpg",\n        "description": "Rotterdam famous for its crowded street markets with the best street food in Asia"\n      },\n      {\n        "src": "https://24.objects.htmlacademy.pro/static/destinations/17.jpg",\n        "description": "Rotterdam with a beautiful old town"\n      }\n    ]\n  }\n]'),me=async()=>structuredClone(be);class ve extends ce{constructor(){super({defaultData:[]})}async init(){super._fetchData({fetchFn:me})}getDestinationById(e){return this.data.find((t=>e===t.id))||null}}(class{static start(){const e=new fe,t=new pe,n=new ve;new oe({routeModel:e,offerModel:t,destinationModel:n}).init()}}).start()})()})();
//# sourceMappingURL=bundle.996052c2305c0fb70aca.js.map